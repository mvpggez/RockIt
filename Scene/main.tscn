[gd_scene load_steps=5 format=2]

[ext_resource path="res://Scene/World/earth.tscn" type="PackedScene" id=1]
[ext_resource path="res://Scene/UI/shop.tscn" type="PackedScene" id=2]
[ext_resource path="res://Scene/UI/flying.tscn" type="PackedScene" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

export var money = 0
enum Phase {SHOP, LAUNCHING, FLYING, RESULT}
var phase = null

func _ready():
	set_phase(Phase.SHOP)

func set_phase(new_phase):
	if phase == new_phase:
		return
	
	if phase == Phase.SHOP:
		$UI_shop.visible = false
	elif phase == Phase.LAUNCHING:
		$UI_flying.visible = false
	elif phase == Phase.FLYING:
		$UI_flying.visible = false
	elif phase == Phase.RESULT:
		pass#$UI_flying.visible = false
		
	if new_phase == Phase.SHOP:
		$UI_shop.visible = true
	elif new_phase == Phase.LAUNCHING:
		$UI_flying.visible = true
	elif new_phase == Phase.FLYING:
		$UI_flying.visible = true
	elif new_phase == Phase.RESULT:
		pass#$UI_shop.visible = true
		
	phase = new_phase

func add_money(value):
	print(\"Recieved \",value,\"$\")
	money += value

func is_affordable(value):
	return money >= value
	
func substract_money(value):
	money -= value

func get_world():
	return $Spatial
	
func launch():
	get_world().get_node(\"Camera\").set_standing(false)
	get_world().get_node(\"Rocket\").launched = true
	set_phase(Phase.LAUNCHING)
"

[node name="Main" type="Node"]
script = SubResource( 1 )

[node name="Spatial" parent="." instance=ExtResource( 1 )]

[node name="UI_shop" parent="." instance=ExtResource( 2 )]
visible = false

[node name="UI_flying" parent="." instance=ExtResource( 3 )]
visible = false
